{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\201810938\\\\Desktop\\\\lastMap\\\\TrafficMap\\\\mapfront\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\201810938\\\\Desktop\\\\lastMap\\\\TrafficMap\\\\mapfront\\\\src\\\\pages\\\\LocationMap.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate, useLocation } from 'react-router';\nimport axios from 'axios';\nimport '../css/Main.css';\nimport SearchBar from \"../components/SearchBar\";\nimport Button from \"../components/Button\";\nimport getLocation from '../getLocation';\nimport plus from \"../images/plussign.png\";\nimport minus from \"../images/minussign.png\";\nimport target from \"../images/location.png\";\nimport BuildingDetailInfo from \"../components/BuildingDetailInfo\";\nimport BusStopDetailInfo from '../components/BusStopDetailInfo';\nimport placeholderred from \"../images/placeholderred.png\";\nimport ping from \"../images/ping.png\";\nimport mylocation from \"../images/mylocation.png\";\nimport busstop from \"../images/busstop.png\";\nimport train from \"../images/train.png\";\nimport charging from \"../images/charging_station_icon.png\";\nimport proj4 from 'proj4';\n\nfunction LocationMap() {\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      sid = _useState2[0],\n      setSid = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      keyword = _useState4[0],\n      setKeyword = _useState4[1]; //검색 받은 키워드\n\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      plusbutton = _useState6[0],\n      setPlusButton = _useState6[1];\n\n  var _useState7 = useState(),\n      _useState8 = _slicedToArray(_useState7, 2),\n      minusbutton = _useState8[0],\n      setMinusButton = _useState8[1];\n\n  var _useState9 = useState(),\n      _useState10 = _slicedToArray(_useState9, 2),\n      locationbutton = _useState10[0],\n      setLocationButton = _useState10[1];\n\n  var _useState11 = useState(ping),\n      _useState12 = _slicedToArray(_useState11, 2),\n      icon = _useState12[0],\n      setIcon = _useState12[1];\n\n  var _useState13 = useState(),\n      _useState14 = _slicedToArray(_useState13, 2),\n      findWay = _useState14[0],\n      setFindWay = _useState14[1];\n\n  var _useState15 = useState(true),\n      _useState16 = _slicedToArray(_useState15, 2),\n      infoWindow = _useState16[0],\n      setInfoWindow = _useState16[1];\n\n  var building = useLocation();\n  var navigate = useNavigate();\n\n  var _useState17 = useState(),\n      _useState18 = _slicedToArray(_useState17, 2),\n      location = _useState18[0],\n      setLocation = _useState18[1];\n\n  var _useState19 = useState(),\n      _useState20 = _slicedToArray(_useState19, 2),\n      buildinglocation = _useState20[0],\n      setBuildingLocation = _useState20[1];\n\n  var _useState21 = useState(),\n      _useState22 = _slicedToArray(_useState21, 2),\n      subway = _useState22[0],\n      SetSubway = _useState22[1];\n\n  var _useState23 = useState(),\n      _useState24 = _slicedToArray(_useState23, 2),\n      error = _useState24[0],\n      setError = _useState24[1];\n\n  var _useState25 = useState(true),\n      _useState26 = _slicedToArray(_useState25, 2),\n      refresh = _useState26[0],\n      setRefresh = _useState26[1];\n\n  useEffect(function () {\n    if (building.state.subway) {\n      SetSubway(building.state.subway);\n      setSid(1);\n    }\n  });\n  useEffect(function () {\n    console.log(building);\n    setRefresh(false);\n  }, [building]);\n\n  var handlePlusButton = function handlePlusButton() {\n    setPlusButton(true);\n  };\n\n  var handleMinusButton = function handleMinusButton() {\n    setMinusButton(true);\n  };\n\n  var handleLocationButton = function handleLocationButton() {\n    setLocationButton(true);\n  };\n\n  var handleSuccess = function handleSuccess(pos) {\n    var buildinglatitude;\n    var buildinglongitude;\n\n    if (building.state.props.address !== '버스정류장') {\n      buildinglatitude = building.state.props.obj.latitude;\n      buildinglongitude = building.state.props.obj.longitude;\n\n      if (building.state.subway === null) {\n        setSid(0);\n      } else {\n        setIcon(train);\n      }\n    } else if (building.state.props.address === '버스정류장' && !building.state.id) {\n      setSid(2);\n      setIcon(busstop);\n      buildinglatitude = building.state.props.obj.posx;\n      buildinglongitude = building.state.props.obj.posy;\n    } else {\n      var besseltm = \"+proj=tmerc +lat_0=38 +lon_0=127 +k=1 +x_0=200000 +y_0=500000 +ellps=bessel +units=m +no_defs +towgs84=-115.80,474.99,674.11,1.16,-2.31,-1.63,6.43\";\n      var wgs84 = \"+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees\";\n      var lat = building.state.props.obj.posx;\n      var lng = building.state.props.obj.posy;\n      var pt = new proj4.Point(lat, lng);\n      var test = proj4(besseltm, wgs84, pt);\n      buildinglatitude = test.y;\n      buildinglongitude = test.x;\n      console.log(\"길찾기 중인 버정\");\n      setSid(0);\n    }\n\n    var _pos$coords = pos.coords,\n        latitude = _pos$coords.latitude,\n        longitude = _pos$coords.longitude;\n    setLocation({\n      latitude: latitude,\n      longitude: longitude\n    });\n    setBuildingLocation({\n      buildinglatitude: buildinglatitude,\n      buildinglongitude: buildinglongitude\n    });\n  }; // const handleError= (error) -> {\n  //   setError(error.message);\n  // };\n\n\n  var handlebackButton = function handlebackButton() {\n    window.location.href = \"/\";\n  };\n\n  var handleKeyword = function handleKeyword(e) {\n    return setKeyword(e.target.value);\n  };\n\n  function setScreenSize() {\n    var vh = window.innerHeight * 0.01;\n    document.documentElement.style.setProperty(\"--vh\", \"\".concat(vh, \"px\"));\n  }\n\n  useEffect(function () {\n    var zoomin;\n    var zoomout;\n    var movelocation;\n    var mrefresh = refresh;\n    console.log(mrefresh);\n    setScreenSize();\n\n    if (building) {\n      navigator.geolocation.watchPosition(handleSuccess);\n    }\n\n    if (location) {\n      var lat = location.latitude;\n      var lng = location.longitude;\n    }\n\n    if (buildinglocation) {\n      var blat = buildinglocation.buildinglatitude;\n      var blng = buildinglocation.buildinglongitude;\n    }\n\n    if (plusbutton === true) {\n      zoomin = true;\n      setPlusButton(false);\n    } else {\n      zoomin = false;\n    }\n\n    if (minusbutton === true) {\n      zoomout = true;\n      setMinusButton(false);\n    } else {\n      zoomout = false;\n    }\n\n    if (locationbutton === true) {\n      movelocation = true;\n      setLocationButton(false);\n    } else {\n      movelocation = false;\n    }\n\n    var script = document.createElement(\"script\");\n    script.innerHTML = \" \\n        var locationmap;\\n        var zoomIn;\\n\\n        var wheelmarkers;\\n        var latlon;\\n\\n        if(!latlon){\\n          latlon = [{lat: 37.44738908, lon: 126.7306811}, {lat: 37.44765055, lon: 126.7124925}, {lat: 37.45611315, lon: 126.7133538}, {lat: 37.46398002, lon: 126.710947}, {lat: 37.46611111, lon: 126.714686}, {lat: 37.467324, lon: 126.699152},\\n                    {lat: 37.4613873, lon: 126.7311568}, {lat: 37.43588036, lon: 126.7473614}, {lat: 37.42791756, lon: 126.7507057}, {lat: 37.43010131, lon: 126.7159454}, {lat: 37.40422829, lon: 126.7163979}, {lat: 37.39776762, lon: 126.7263901},\\n                    {lat: 37.44789883, lon: 126.7370578}, {lat: 37.39176155, lon: 126.7217373}, {lat: 37.42468926, lon: 126.7533209}, {lat: 37.45514557, lon: 126.701585}, {lat: 37.44854249, lon: 126.7530631}, {lat: 37.45587968, lon: 126.7195142},\\n                    {lat: 37.4574194, lon: 126.7023421}, {lat: 37.45688086, lon: 126.7013016}, {lat: 37.46964954, lon: 126.7081713}, {lat: 37.44944591, lon: 126.7011633}, {lat: 37.45678003, lon: 126.7104966}, {lat: 37.45521033, lon: 126.7315437},\\n                    {lat: 37.44817192, lon: 126.7366364}, {lat: 37.43963366, lon: 126.7598083}, \\n                    {lat: 37.53264131, lon: 126.6441471}, {lat: 37.52641513, lon: 126.6705158}, {lat: 37.56441872, lon: 126.673601}, {lat: 37.54899846, lon: 126.6782282}, {lat: 37.53265854, lon: 126.6537394}, {lat: 37.52509167, lon: 126.6801348}, \\n                    {lat: 37.51554696, lon: 126.6778363}, {lat: 37.51460915, lon: 126.6722848}, {lat: 37.51118138, lon: 126.6747559}, {lat: 37.50250466, lon: 126.6746007}, {lat: 37.50820266, lon: 126.6782976}, {lat: 37.49434393, lon: 126.672588},\\n                    {lat: 37.49085455, lon: 126.6848496}, {lat: 37.49250983, lon: 126.6800417}, {lat: 37.48748624, lon: 126.683403}, {lat: 37.60508357, lon: 126.6618003}, {lat: 37.59507709, lon: 126.7017045}, {lat: 37.59210015, lon: 126.6746255}, \\n                    {lat: 37.59496672, lon: 126.6279671}, {lat: 37.59439292, lon: 126.6405824}, {lat: 37.60167498, lon: 126.6564585}, {lat: 37.5977252, lon: 126.667137}, {lat: 37.59293488, lon: 126.6731833}, {lat: 37.58496948, lon: 126.6759831}, \\n                    {lat: 37.56876146, lon: 126.6754722}, {lat: 37.56122795, lon: 126.6775452}, {lat: 37.55133706, lon: 126.6770966}, {lat: 37.54395416, lon: 126.6768454}, {lat: 37.52470809, lon: 126.6752851}, {lat: 37.51757789, lon: 126.6768399563},\\n                    {lat: 37.5070671, lon: 126.6762537}, {lat: 37.50025173, lon: 126.6758537}, {lat: 37.49007763, lon: 126.6752728}, {lat: 37.48412624, lon: 126.6838511}, {lat: 37.47416837, lon: 126.6814437},\\n                    {lat: 37.537442, lon: 126.737759}, {lat: 37.532424, lon: 126.7121}, {lat: 37.525051, lon: 126.709819}, {lat: 37.539606, lon: 126.72135}, {lat: 37.54421, lon: 126.72814}, {lat: 37.537759, lon: 126.728978}, \\n                    {lat: 37.530757, lon: 126.729686}, {lat: 37.532912, lon: 126.723909}, {lat: 37.528104, lon: 126.73642}, {lat: 37.548144, lon: 126.741451}, {lat: 37.561578, lon: 126.754899}, {lat: 37.545278, lon: 126.717463}, \\n                    {lat: 37.571645, lon: 126.736023}, {lat: 37.566414, lon: 126.742647}, {lat: 37.553578, lon: 126.744932}, {lat: 37.545062, lon: 126.738621}, {lat: 37.534507, lon: 126.741707}, {lat: 37.57709, lon: 126.733483}, \\n                    {lat: 37.547444, lon: 126.727095}, {lat: 37.543628, lon: 126.715609}, {lat: 37.550132, lon: 126.741986}, {lat: 37.526032, lon: 126.750287}, {lat: 37.529235, lon: 126.715001}, {lat: 37.543227, lon: 126.728081}, \\n                    {lat: 37.538084, lon: 126.722601}, {lat: 37.530313, lon: 126.72257},\\n                    {lat: 37.47408104, lon: 126.6213401}, {lat: 37.49416117, lon: 126.5314849}, {lat: 37.49332988, lon: 126.4883439}, {lat: 37.45278277, lon: 126.6282058}, {lat: 37.47444945, lon: 126.6272621},\\n                    {lat: 37.455946717, lon: 126.705586062}, {lat: 37.456085358, lon: 126.706082821}];\\n        }\\n\\n        function initTmap(pos) {\\n          var wgs84;\\n          if(parseInt(pos.lat) > 1000){\\n            var epsg3857 = new Tmapv2.Point(pos.lat, pos.lng);\\n            console.log(epsg3857);\\n            wgs84 = Tmapv2.Projection.convertBesselTMToWGS84GEO(epsg3857);\\n            console.log(\\\"\\uC88C\\uD45C\\uBCC0\\uD658\\uC2E4\\uD589\\\");\\n            console.log(wgs84);\\n          }\\n          else{\\n            wgs84 = new Tmapv2.LatLng(pos.lat, pos.lng);\\n          }\\n            var map = new Tmapv2.Map(\\\"TMapApp\\\", {\\n                center: wgs84,\\n                width: \\\"100%\\\",\\n                height: \\\"100%\\\",\\n                httpsMode: true,\\n                zoomControl: false,\\n                zoom:18\\n            });\\n            map.addListener(\\\"click\\\", onClick); //\\uC6F9\\uC5D0\\uC11C \\uC9C0\\uB3C4 \\uD074\\uB9AD\\n            map.addListener(\\\"touchstart\\\", onTouchstart); // \\uBAA8\\uBC14\\uC77C\\uC5D0\\uC11C \\uC9C0\\uB3C4 \\uD130\\uCE58\\n    \\n            //map.zoomIn();\\n            //map[\\\"zoomIn\\\"]();\\n        \\n            return map;\\n        }\\n\\n        function createmarker(lat, lng, img, sizew, sizeh){\\n          var wgs84;\\n          if(parseInt(lat) > 1000){\\n            var epsg3857 = new Tmapv2.Point(lat, lng);\\n            console.log(epsg3857);\\n            wgs84 = Tmapv2.Projection.convertBesselTMToWGS84GEO(epsg3857);\\n            console.log(\\\"\\uC88C\\uD45C\\uBCC0\\uD658\\uC2E4\\uD589\\\");\\n            console.log(wgs84);\\n          }\\n          else{\\n            wgs84 = new Tmapv2.LatLng(lat, lng);\\n          }\\n          console.log(img);\\n          var marker = new Tmapv2.Marker({\\n            position: wgs84,\\n            icon: img,\\n            iconSize : new Tmapv2.Size(sizew, sizeh),\\n            map: locationmap\\n          })\\n        }\\n\\n        function onClick(e) {\\n            var result_mouse = e.latLng\\n            var resultDiv = document.getElementById(\\\"result_mouse\\\");\\n            // resultDiv.innerHTML = result_mouse;\\n            console.log(result_mouse._lat);     \\n        }\\n\\n        function onTouchstart(e) {\\n            var result = e.latLng\\n            var resultDiv = document.getElementById(\\\"result\\\");\\n            // resultDiv.innerHTML = result;\\n        }\\n        \\n        if(!locationmap && \".concat(lat, \" && \").concat(blat, \"){\\n          var mylocation = {lat: \").concat(blat, \", lng: \").concat(blng, \"};\\n          locationmap = initTmap(mylocation);\\n          // createmarker(\").concat(lat, \", \").concat(lng, \", \\\"\").concat(mylocation, \"\\\", 40, 40);\\n          createmarker(\").concat(blat, \", \").concat(blng, \", \\\"\").concat(icon, \"\\\", 32 , 48);  \\n        }\\n\\n        var mymarker;\\n        if(mymarker){\\n          mymarker.setMap(null);\\n        }\\n        loc = new Tmapv2.LatLng(\").concat(lat, \", \").concat(lng, \");\\n        mymarker = new Tmapv2.Marker({\\n          position: loc,\\n          icon: \\\"\").concat(mylocation, \"\\\",\\n          iconSize : new Tmapv2.Size(40, 40),\\n          map: locationmap\\n        })\\n\\n        //////////////////////////////////////////////////////////////////////////////////////////////\\n      var wheelmarker;\\n      if(locationmap && !wheelmarkers && latlon){\\n        for(var i = 0; i < 26; i++){\\n          wheelmarker = new Tmapv2.Marker({\\n            position: new Tmapv2.LatLng(latlon[i].lat, latlon[i].lon),\\n            icon: \\\"\").concat(charging, \"\\\",\\n            iconSize: new Tmapv2.Size(15, 15),\\n            map: locationmap\\n          });\\n        }\\n      }\\n\\n      //////////////////////////////////////////////////////////////////////////////////////////////\\n\\n        if(locationmap && \").concat(zoomin, \"){\\n          locationmap.zoomIn();\\n        }\\n        if(locationmap && \").concat(zoomout, \"){\\n          locationmap.zoomOut();\\n        }\\n        if(locationmap && \").concat(movelocation, \"){\\n          var setmylocation = new Tmapv2.LatLng(\").concat(lat, \", \").concat(lng, \");\\n          locationmap.setCenter(setmylocation);\\n        }\\n   \");\n    script.type = \"text/javascript\";\n    script.async = \"async\";\n    document.head.appendChild(script);\n  }, [handleSuccess, location]);\n  return /*#__PURE__*/React.createElement(\"main\", {\n    style: {\n      overflow: \"hidden\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    id: \"TMapApp\",\n    style: {\n      height: \"100%\",\n      width: \"100%\",\n      position: \"fixed\",\n      overflow: \"hidden\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(\"nav\", {\n    class: \"navbar navbar-default\",\n    style: {\n      width: \"100%\",\n      height: \"10%\",\n      display: \"flex\",\n      padding: \"0px 10px\",\n      backgroundColor: \"white\",\n      boxShadow: \"0px 1px 20px 1px #A6A6A6\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    style: {\n      textAlign: \"center\",\n      width: \"100%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-2\",\n    style: {},\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    class: \"bi bi-arrow-left-circle\",\n    style: {\n      fontSize: \"2rem\"\n    },\n    onClick: handlebackButton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-10 align-self-center\",\n    style: {\n      right: \"5%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 9\n    }\n  }, building.state.props.name))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 346,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mylocation\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: handleLocationButton,\n    src: target,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 348,\n      columnNumber: 9\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"rightbarbutton\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"zoom\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"plusbutton\",\n    onClick: handlePlusButton,\n    style: {\n      backgroundColor: \"#A6A6A6\",\n      border: \"none\",\n      opacity: \"0.8\",\n      borderRadius: \"50px\",\n      width: \"42px\",\n      right: \"-1px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: plus,\n    style: {\n      width: \"80%\",\n      height: \"70%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 188\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"minusbutton\",\n    onClick: handleMinusButton,\n    style: {\n      backgroundColor: \"#A6A6A6\",\n      border: \"none\",\n      opacity: \"0.8\",\n      borderRadius: \"50px\",\n      marginTop: \"10px\",\n      width: \"42px\",\n      right: \"-1px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: minus,\n    style: {\n      width: \"80%\",\n      height: \"70%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 212\n    }\n  })))), sid !== 2 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Infobar\",\n    style: {\n      position: \"fixed\",\n      width: \"100%\",\n      height: \"10%\",\n      bottom: \"0px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 361,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(BuildingDetailInfo, {\n    props: building.state.props.obj,\n    subway: subway,\n    findway: building.state.props.id,\n    whole: building.state,\n    mylocation: building.state.props.mylocation,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 362,\n      columnNumber: 9\n    }\n  })), sid === 2 && /*#__PURE__*/React.createElement(BusStopDetailInfo, {\n    obj: building.state.props.obj,\n    bustop: building.state.busstop,\n    location: location,\n    findway: building.state.props.id,\n    whole: building.state,\n    mylocation: building.state.props.mylocation,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 364,\n      columnNumber: 19\n    }\n  }));\n}\n\nexport default LocationMap;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useLocation","axios","SearchBar","Button","getLocation","plus","minus","target","BuildingDetailInfo","BusStopDetailInfo","placeholderred","ping","mylocation","busstop","train","charging","proj4","LocationMap","sid","setSid","keyword","setKeyword","plusbutton","setPlusButton","minusbutton","setMinusButton","locationbutton","setLocationButton","icon","setIcon","findWay","setFindWay","infoWindow","setInfoWindow","building","navigate","location","setLocation","buildinglocation","setBuildingLocation","subway","SetSubway","error","setError","refresh","setRefresh","state","console","log","handlePlusButton","handleMinusButton","handleLocationButton","handleSuccess","pos","buildinglatitude","buildinglongitude","props","address","obj","latitude","longitude","id","posx","posy","besseltm","wgs84","lat","lng","pt","Point","test","y","x","coords","handlebackButton","window","href","handleKeyword","e","value","setScreenSize","vh","innerHeight","document","documentElement","style","setProperty","zoomin","zoomout","movelocation","mrefresh","navigator","geolocation","watchPosition","blat","blng","script","createElement","innerHTML","type","async","head","appendChild","overflow","height","width","position","display","padding","backgroundColor","boxShadow","textAlign","fontSize","right","name","border","opacity","borderRadius","marginTop","bottom"],"sources":["C:/Users/201810938/Desktop/lastMap/TrafficMap/mapfront/src/pages/LocationMap.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport {useNavigate, useLocation} from 'react-router';\r\nimport axios from 'axios';\r\nimport '../css/Main.css';\r\nimport SearchBar from \"../components/SearchBar\";\r\nimport Button from \"../components/Button\";\r\nimport getLocation from '../getLocation';\r\nimport plus from \"../images/plussign.png\";\r\nimport minus from \"../images/minussign.png\"\r\nimport target from \"../images/location.png\"\r\nimport BuildingDetailInfo from \"../components/BuildingDetailInfo\"\r\nimport BusStopDetailInfo from '../components/BusStopDetailInfo';\r\n\r\nimport placeholderred from \"../images/placeholderred.png\"\r\nimport ping from \"../images/ping.png\"\r\nimport mylocation from \"../images/mylocation.png\"\r\nimport busstop from \"../images/busstop.png\"\r\nimport train from \"../images/train.png\"\r\nimport charging from \"../images/charging_station_icon.png\"\r\nimport proj4 from 'proj4';\r\n\r\nfunction LocationMap() {\r\n    const [sid, setSid] = useState();\r\n    const [keyword, setKeyword] = useState();  //검색 받은 키워드\r\n    const [plusbutton, setPlusButton] = useState();\r\n    const [minusbutton, setMinusButton] = useState();\r\n    const [locationbutton, setLocationButton] = useState();\r\n    const [icon, setIcon] = useState(ping);\r\n    const [findWay, setFindWay] = useState();\r\n    const [infoWindow, setInfoWindow] = useState(true);\r\n\r\n    const building = useLocation();\r\n    const navigate = useNavigate();\r\n\r\n \r\n    const [location, setLocation] = useState();\r\n    const [buildinglocation, setBuildingLocation] = useState();\r\n    const [subway, SetSubway] = useState();\r\n    const [error, setError] = useState();\r\n\r\n    const [refresh, setRefresh] = useState(true);\r\n\r\n    useEffect(()=>{\r\n      if(building.state.subway){\r\n        SetSubway(building.state.subway);\r\n        setSid(1);\r\n      }\r\n    })\r\n\r\n    useEffect(()=>{\r\n      console.log(building);\r\n      setRefresh(false);\r\n    }, [building]);\r\n\r\n    const handlePlusButton = () => {\r\n      setPlusButton(true);\r\n    };\r\n    const handleMinusButton = () => {\r\n      setMinusButton(true);\r\n    };\r\n    const handleLocationButton = () => {\r\n      setLocationButton(true);\r\n    }\r\n\r\n    const handleSuccess = (pos) => {\r\n      var buildinglatitude;\r\n      var buildinglongitude\r\n      if(building.state.props.address !== '버스정류장'){\r\n        buildinglatitude = building.state.props.obj.latitude;\r\n        buildinglongitude = building.state.props.obj.longitude;\r\n        if(building.state.subway === null){\r\n          setSid(0);\r\n        }else{\r\n          setIcon(train);\r\n        }\r\n      }\r\n      else if(building.state.props.address === '버스정류장' && !building.state.id){\r\n        setSid(2);\r\n        setIcon(busstop);\r\n        buildinglatitude = building.state.props.obj.posx;\r\n        buildinglongitude = building.state.props.obj.posy;\r\n      }else{\r\n        const besseltm = \"+proj=tmerc +lat_0=38 +lon_0=127 +k=1 +x_0=200000 +y_0=500000 +ellps=bessel +units=m +no_defs +towgs84=-115.80,474.99,674.11,1.16,-2.31,-1.63,6.43\"\r\n        const wgs84 = \"+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees\" \r\n        var lat = building.state.props.obj.posx;\r\n        var lng = building.state.props.obj.posy;\r\n        var pt = new proj4.Point(lat, lng);\r\n        var test = proj4(besseltm, wgs84, pt);\r\n\r\n        buildinglatitude = test.y;\r\n        buildinglongitude = test.x;\r\n        console.log(\"길찾기 중인 버정\");\r\n        setSid(0);\r\n\r\n      }\r\n    \r\n      const {latitude, longitude } = pos.coords;\r\n      setLocation({\r\n        latitude, longitude\r\n      })\r\n      setBuildingLocation({\r\n        buildinglatitude, buildinglongitude\r\n      })\r\n    };\r\n\r\n    // const handleError= (error) -> {\r\n    //   setError(error.message);\r\n    // };\r\n\r\n    const handlebackButton = () => {\r\n      window.location.href = \"/\";\r\n    }\r\n\r\n  \r\n    const handleKeyword = (e) => setKeyword(e.target.value);\r\n    \r\n    function setScreenSize(){\r\n      let vh = window.innerHeight * 0.01;\r\n      document.documentElement.style.setProperty(\"--vh\", `${vh}px`);\r\n  }\r\n     \r\n  useEffect(() => {\r\n    var zoomin;\r\n    var zoomout;\r\n    var movelocation;\r\n\r\n    var mrefresh = refresh;\r\n    console.log(mrefresh);\r\n\r\n    setScreenSize();\r\n    if(building){\r\n      navigator.geolocation.watchPosition(handleSuccess);\r\n    }\r\n    if(location){\r\n      var lat = location.latitude;\r\n      var lng = location.longitude;\r\n    }\r\n    if(buildinglocation){\r\n      var blat = buildinglocation.buildinglatitude;\r\n      var blng = buildinglocation.buildinglongitude;\r\n    }\r\n\r\n    if(plusbutton === true){\r\n      zoomin = true;\r\n      setPlusButton(false);\r\n    }\r\n    else{\r\n      zoomin = false;\r\n    }\r\n    if(minusbutton === true){\r\n      zoomout = true;\r\n      setMinusButton(false);\r\n    }\r\n    else{\r\n      zoomout = false;\r\n    }\r\n    if(locationbutton === true){\r\n      movelocation = true;\r\n      setLocationButton(false);\r\n    }\r\n    else{\r\n      movelocation = false;\r\n    }\r\n\r\n    const script = document.createElement(\"script\");\r\n    script.innerHTML = ` \r\n        var locationmap;\r\n        var zoomIn;\r\n\r\n        var wheelmarkers;\r\n        var latlon;\r\n\r\n        if(!latlon){\r\n          latlon = [{lat: 37.44738908, lon: 126.7306811}, {lat: 37.44765055, lon: 126.7124925}, {lat: 37.45611315, lon: 126.7133538}, {lat: 37.46398002, lon: 126.710947}, {lat: 37.46611111, lon: 126.714686}, {lat: 37.467324, lon: 126.699152},\r\n                    {lat: 37.4613873, lon: 126.7311568}, {lat: 37.43588036, lon: 126.7473614}, {lat: 37.42791756, lon: 126.7507057}, {lat: 37.43010131, lon: 126.7159454}, {lat: 37.40422829, lon: 126.7163979}, {lat: 37.39776762, lon: 126.7263901},\r\n                    {lat: 37.44789883, lon: 126.7370578}, {lat: 37.39176155, lon: 126.7217373}, {lat: 37.42468926, lon: 126.7533209}, {lat: 37.45514557, lon: 126.701585}, {lat: 37.44854249, lon: 126.7530631}, {lat: 37.45587968, lon: 126.7195142},\r\n                    {lat: 37.4574194, lon: 126.7023421}, {lat: 37.45688086, lon: 126.7013016}, {lat: 37.46964954, lon: 126.7081713}, {lat: 37.44944591, lon: 126.7011633}, {lat: 37.45678003, lon: 126.7104966}, {lat: 37.45521033, lon: 126.7315437},\r\n                    {lat: 37.44817192, lon: 126.7366364}, {lat: 37.43963366, lon: 126.7598083}, \r\n                    {lat: 37.53264131, lon: 126.6441471}, {lat: 37.52641513, lon: 126.6705158}, {lat: 37.56441872, lon: 126.673601}, {lat: 37.54899846, lon: 126.6782282}, {lat: 37.53265854, lon: 126.6537394}, {lat: 37.52509167, lon: 126.6801348}, \r\n                    {lat: 37.51554696, lon: 126.6778363}, {lat: 37.51460915, lon: 126.6722848}, {lat: 37.51118138, lon: 126.6747559}, {lat: 37.50250466, lon: 126.6746007}, {lat: 37.50820266, lon: 126.6782976}, {lat: 37.49434393, lon: 126.672588},\r\n                    {lat: 37.49085455, lon: 126.6848496}, {lat: 37.49250983, lon: 126.6800417}, {lat: 37.48748624, lon: 126.683403}, {lat: 37.60508357, lon: 126.6618003}, {lat: 37.59507709, lon: 126.7017045}, {lat: 37.59210015, lon: 126.6746255}, \r\n                    {lat: 37.59496672, lon: 126.6279671}, {lat: 37.59439292, lon: 126.6405824}, {lat: 37.60167498, lon: 126.6564585}, {lat: 37.5977252, lon: 126.667137}, {lat: 37.59293488, lon: 126.6731833}, {lat: 37.58496948, lon: 126.6759831}, \r\n                    {lat: 37.56876146, lon: 126.6754722}, {lat: 37.56122795, lon: 126.6775452}, {lat: 37.55133706, lon: 126.6770966}, {lat: 37.54395416, lon: 126.6768454}, {lat: 37.52470809, lon: 126.6752851}, {lat: 37.51757789, lon: 126.6768399563},\r\n                    {lat: 37.5070671, lon: 126.6762537}, {lat: 37.50025173, lon: 126.6758537}, {lat: 37.49007763, lon: 126.6752728}, {lat: 37.48412624, lon: 126.6838511}, {lat: 37.47416837, lon: 126.6814437},\r\n                    {lat: 37.537442, lon: 126.737759}, {lat: 37.532424, lon: 126.7121}, {lat: 37.525051, lon: 126.709819}, {lat: 37.539606, lon: 126.72135}, {lat: 37.54421, lon: 126.72814}, {lat: 37.537759, lon: 126.728978}, \r\n                    {lat: 37.530757, lon: 126.729686}, {lat: 37.532912, lon: 126.723909}, {lat: 37.528104, lon: 126.73642}, {lat: 37.548144, lon: 126.741451}, {lat: 37.561578, lon: 126.754899}, {lat: 37.545278, lon: 126.717463}, \r\n                    {lat: 37.571645, lon: 126.736023}, {lat: 37.566414, lon: 126.742647}, {lat: 37.553578, lon: 126.744932}, {lat: 37.545062, lon: 126.738621}, {lat: 37.534507, lon: 126.741707}, {lat: 37.57709, lon: 126.733483}, \r\n                    {lat: 37.547444, lon: 126.727095}, {lat: 37.543628, lon: 126.715609}, {lat: 37.550132, lon: 126.741986}, {lat: 37.526032, lon: 126.750287}, {lat: 37.529235, lon: 126.715001}, {lat: 37.543227, lon: 126.728081}, \r\n                    {lat: 37.538084, lon: 126.722601}, {lat: 37.530313, lon: 126.72257},\r\n                    {lat: 37.47408104, lon: 126.6213401}, {lat: 37.49416117, lon: 126.5314849}, {lat: 37.49332988, lon: 126.4883439}, {lat: 37.45278277, lon: 126.6282058}, {lat: 37.47444945, lon: 126.6272621},\r\n                    {lat: 37.455946717, lon: 126.705586062}, {lat: 37.456085358, lon: 126.706082821}];\r\n        }\r\n\r\n        function initTmap(pos) {\r\n          var wgs84;\r\n          if(parseInt(pos.lat) > 1000){\r\n            var epsg3857 = new Tmapv2.Point(pos.lat, pos.lng);\r\n            console.log(epsg3857);\r\n            wgs84 = Tmapv2.Projection.convertBesselTMToWGS84GEO(epsg3857);\r\n            console.log(\"좌표변환실행\");\r\n            console.log(wgs84);\r\n          }\r\n          else{\r\n            wgs84 = new Tmapv2.LatLng(pos.lat, pos.lng);\r\n          }\r\n            var map = new Tmapv2.Map(\"TMapApp\", {\r\n                center: wgs84,\r\n                width: \"100%\",\r\n                height: \"100%\",\r\n                httpsMode: true,\r\n                zoomControl: false,\r\n                zoom:18\r\n            });\r\n            map.addListener(\"click\", onClick); //웹에서 지도 클릭\r\n            map.addListener(\"touchstart\", onTouchstart); // 모바일에서 지도 터치\r\n    \r\n            //map.zoomIn();\r\n            //map[\"zoomIn\"]();\r\n        \r\n            return map;\r\n        }\r\n\r\n        function createmarker(lat, lng, img, sizew, sizeh){\r\n          var wgs84;\r\n          if(parseInt(lat) > 1000){\r\n            var epsg3857 = new Tmapv2.Point(lat, lng);\r\n            console.log(epsg3857);\r\n            wgs84 = Tmapv2.Projection.convertBesselTMToWGS84GEO(epsg3857);\r\n            console.log(\"좌표변환실행\");\r\n            console.log(wgs84);\r\n          }\r\n          else{\r\n            wgs84 = new Tmapv2.LatLng(lat, lng);\r\n          }\r\n          console.log(img);\r\n          var marker = new Tmapv2.Marker({\r\n            position: wgs84,\r\n            icon: img,\r\n            iconSize : new Tmapv2.Size(sizew, sizeh),\r\n            map: locationmap\r\n          })\r\n        }\r\n\r\n        function onClick(e) {\r\n            var result_mouse = e.latLng\r\n            var resultDiv = document.getElementById(\"result_mouse\");\r\n            // resultDiv.innerHTML = result_mouse;\r\n            console.log(result_mouse._lat);     \r\n        }\r\n\r\n        function onTouchstart(e) {\r\n            var result = e.latLng\r\n            var resultDiv = document.getElementById(\"result\");\r\n            // resultDiv.innerHTML = result;\r\n        }\r\n        \r\n        if(!locationmap && ${lat} && ${blat}){\r\n          var mylocation = {lat: ${blat}, lng: ${blng}};\r\n          locationmap = initTmap(mylocation);\r\n          // createmarker(${lat}, ${lng}, \"${mylocation}\", 40, 40);\r\n          createmarker(${blat}, ${blng}, \"${icon}\", 32 , 48);  \r\n        }\r\n\r\n        var mymarker;\r\n        if(mymarker){\r\n          mymarker.setMap(null);\r\n        }\r\n        loc = new Tmapv2.LatLng(${lat}, ${lng});\r\n        mymarker = new Tmapv2.Marker({\r\n          position: loc,\r\n          icon: \"${mylocation}\",\r\n          iconSize : new Tmapv2.Size(40, 40),\r\n          map: locationmap\r\n        })\r\n\r\n        //////////////////////////////////////////////////////////////////////////////////////////////\r\n      var wheelmarker;\r\n      if(locationmap && !wheelmarkers && latlon){\r\n        for(var i = 0; i < 26; i++){\r\n          wheelmarker = new Tmapv2.Marker({\r\n            position: new Tmapv2.LatLng(latlon[i].lat, latlon[i].lon),\r\n            icon: \"${charging}\",\r\n            iconSize: new Tmapv2.Size(15, 15),\r\n            map: locationmap\r\n          });\r\n        }\r\n      }\r\n\r\n      //////////////////////////////////////////////////////////////////////////////////////////////\r\n\r\n        if(locationmap && ${zoomin}){\r\n          locationmap.zoomIn();\r\n        }\r\n        if(locationmap && ${zoomout}){\r\n          locationmap.zoomOut();\r\n        }\r\n        if(locationmap && ${movelocation}){\r\n          var setmylocation = new Tmapv2.LatLng(${lat}, ${lng});\r\n          locationmap.setCenter(setmylocation);\r\n        }\r\n   `;\r\n    script.type = \"text/javascript\";\r\n    script.async = \"async\";\r\n    document.head.appendChild(script);\r\n  }, [handleSuccess, location]);\r\n\r\n  return (\r\n    <main style={{overflow: \"hidden\"}}>\r\n    <div\r\n      id=\"TMapApp\"\r\n      style={{\r\n        height: \"100%\",\r\n        width: \"100%\",\r\n        position: \"fixed\",\r\n        overflow: \"hidden\",\r\n      }}\r\n    >\r\n    </div>\r\n\r\n    <nav\r\n      class=\"navbar navbar-default\"\r\n      style={{\r\n        width: \"100%\",\r\n        height: \"10%\",\r\n        display: \"flex\",\r\n        padding: \"0px 10px\",\r\n        backgroundColor: \"white\",\r\n        boxShadow: \"0px 1px 20px 1px #A6A6A6\",\r\n      }}>\r\n      <div className=\"row\" style={{ textAlign: \"center\", width: \"100%\"}}>\r\n        <div className=\"col-2\" style={{ }}>\r\n        <i\r\n          class=\"bi bi-arrow-left-circle\"\r\n          style={{ fontSize: \"2rem\"}}\r\n          onClick={handlebackButton}\r\n        ></i>\r\n        </div>\r\n        <div className=\"col-10 align-self-center\" style={{ right: \"5%\" }}>\r\n        {building.state.props.name}\r\n        </div>\r\n      </div>\r\n\r\n    </nav>\r\n\r\n\r\n    <div className=\"left\">\r\n      <div className=\"mylocation\">\r\n        <Button onClick={handleLocationButton} src={target}/>\r\n      </div>\r\n\r\n    </div>\r\n\r\n    <div className=\"rightbarbutton\">\r\n      <div className=\"zoom\">\r\n      <button className=\"plusbutton\" onClick={handlePlusButton} style={{backgroundColor: \"#A6A6A6\", border: \"none\", opacity: \"0.8\", borderRadius: \"50px\",  width: \"42px\", right: \"-1px\",}}><img src={plus} style={{width: \"80%\", height: \"70%\"}}></img></button>\r\n        <button className=\"minusbutton\" onClick={handleMinusButton} style={{backgroundColor: \"#A6A6A6\", border: \"none\", opacity: \"0.8\",  borderRadius: \"50px\",  marginTop: \"10px\", width: \"42px\", right: \"-1px\",}}><img src={minus} style={{width: \"80%\", height: \"70%\"}}></img></button>\r\n        {/* <SideBar /> */}\r\n      </div>\r\n    </div>\r\n    {sid !== 2 && \r\n    <div className=\"Infobar\" style={{position: \"fixed\", width: \"100%\", height: \"10%\", bottom: \"0px\" }}>\r\n        <BuildingDetailInfo props={building.state.props.obj} subway={subway} findway={building.state.props.id} whole={building.state} mylocation={building.state.props.mylocation}/>\r\n    </div>}\r\n    {sid === 2 && <BusStopDetailInfo obj={building.state.props.obj} bustop={building.state.busstop} location={location} findway={building.state.props.id} whole={building.state} mylocation={building.state.props.mylocation}></BusStopDetailInfo>}\r\n\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default LocationMap;"],"mappings":"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"},"metadata":{},"sourceType":"module"}